"use strict";(self.webpackChunksec_frontend=self.webpackChunksec_frontend||[]).push([[381],{30381:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(96540),l=a(47767),s=a(69067),i=a(32325),o=a(47839),r=a(16988),d=a(57741),c=a(39772),u=a(16669),m=a(85586),g=a(58407),p=a(40159),h=a(22252),v=a(87734);const f=()=>{const{mode:e,listingId:t,doctorId:a,setUnifiedListingId:f}=(0,p.V)();(0,n.useEffect)(()=>{localStorage.setItem("activeComponent","listing"),localStorage.setItem("path","addplans"),f(),t||R("/doctordashboard/doctorListing/listingdetails",{replace:!0})},[]);const[A,E]=(0,n.useState)([]),[b,y]=(0,n.useState)(!0),[w,S]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),[P,x]=(0,n.useState)(!1),[D,_]=(0,n.useState)(""),[I,L]=(0,n.useState)("success"),R=(0,l.Zp)(),N=async()=>{x(!1),y(!0);try{var e,n;const o=await d.A.post("/sec/createUpdatedoctorlisting/planAll",{doctor_id:a,doctor_list_id:t});if(_((null==o||null===(e=o.data)||void 0===e||null===(e=e.response)||void 0===e?void 0:e.body)||"Plans fetched successfully."),L("success"),x(!0),void 0===(null==o||null===(n=o.data)||void 0===n||null===(n=n.response)||void 0===n?void 0:n.allPlan))E([]);else{var l,s,i;if(null!=o&&null!==(l=o.data)&&void 0!==l&&null!==(l=l.response)&&void 0!==l&&l.allPlan&&(null==o||null===(s=o.data)||void 0===s||null===(s=s.response)||void 0===s?void 0:s.allPlan.length)>0);E(null==o||null===(i=o.data)||void 0===i||null===(i=i.response)||void 0===i?void 0:i.allPlan)}}catch(e){_("Something went wrong while fetching plans."),L("error"),x(!0)}finally{y(!1)}};(0,n.useEffect)(()=>{(w||k)&&N()},[w,k]),(0,n.useEffect)(()=>{N()},[]);const U=e=>{S(e)},T=()=>{N()};return n.createElement(n.Fragment,null,n.createElement(g.A,{type:I,isOpen:P,message:D}),n.createElement("div",{className:"main-container",style:{width:"100%",maxWidth:960,margin:"0 auto"}},n.createElement(v.A,null),n.createElement(h.A,{title:"Add Plans",subtitle:"Create consultation plans (message or video) with price and duration",actions:n.createElement(c.A,{RenderDataAfterAddingPlan:e=>{C(e)}})},b?Array.from({length:3}).map((e,t)=>n.createElement(s.A,{key:t,sx:{marginBottom:2}},n.createElement(i.A,{variant:"rectangular",width:"100%",height:80}))):0===A.length?n.createElement(m.A,{text_one:"No listing found"}):A.map((e,t)=>n.createElement(u.A,{key:t,planCardData:e,index:t,RendenDataAfterDelete:U,onPlanUpdated:T}))),n.createElement(s.A,{sx:{marginTop:"1%"}},n.createElement(r.A,{buttonCss:{width:"10.625rem",borderRadius:"6.25rem",margin:"0.5%"},label:"Save As Draft",isTransaprent:!0}),n.createElement(o.A,{title:0===A.length?"Add at least one plan to continue":"",disableHoverListener:0!==A.length},n.createElement("div",{style:{display:"inline-block"}},n.createElement(r.A,{buttonCss:{width:"10.625rem",borderRadius:"6.25rem",margin:"0.5%"},label:"Next",isDisabled:0===A.length,handleClick:()=>R("/doctordashboard/doctorListing/addquestioner")}))))))}}}]);
//# sourceMappingURL=381.fe511b5e8af44ec24fd9.js.map