"use strict";(self.webpackChunksec_frontend=self.webpackChunksec_frontend||[]).push([[598],{75598:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var o=n(96540),a=n(47767),i=n(69067),s=n(32325),r=n(14073),l=n(67034),c=n(16988),d=n(91601),u=n(57741),p=n(31927),m=n(73357),f=n(56889),g=n(39057);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=e=>{let{isOpen:t,onClose:n,questionData:a,onQuestionUpdated:i}=e;const[s,l]=(0,o.useState)({question:"",ans_1:"",ans_2:"",ans_3:"",ans_4:""}),[d,y]=(0,o.useState)(!1),[v,E]=(0,o.useState)(!1),[h,x]=(0,o.useState)(""),[_,q]=(0,o.useState)("success"),[A,w]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(a&&t){const e=(null==a?void 0:a.doctor_questions_id)||(null==a?void 0:a.question_id);e?(async e=>{w(!0);try{var t;const n=null===(t=(await u.A.get("/sec/createUpdatedoctorlisting/questionById/".concat(e))).data)||void 0===t||null===(t=t.response)||void 0===t?void 0:t.DocListingQuestion,o=Array.isArray(n)&&n.length?n[0]:null;if(o){const e={question:(null==o?void 0:o.question)||"",ans_1:(null==o?void 0:o.ans_1)||"",ans_2:(null==o?void 0:o.ans_2)||"",ans_3:(null==o?void 0:o.ans_3)||"",ans_4:(null==o?void 0:o.ans_4)||""};l(e)}else x("Failed to load question data"),q("error"),E(!0)}catch(e){x("Failed to load question data"),q("error"),E(!0)}finally{w(!1)}})(e):(x("No question ID found"),q("error"),E(!0))}},[a,t]);const O=(e,t)=>{l(n=>b(b({},n),{},{[e]:t}))},C=()=>{d||n()};return o.createElement(o.Fragment,null,o.createElement(p.A,{isOpen:v,message:h,type:_}),o.createElement(f.A,{isOpen:t,onClose:C,disableBackdropClick:d,style:{zIndex:9999},title:o.createElement(r.A,{variant:"h6",fontFamily:"poppins",fontWeight:"500"},"Edit Question"),footer:o.createElement("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"}},o.createElement(c.A,{label:"Cancel",isTransaprent:!0,handleClick:C,disabled:d||A,buttonCss:{border:"1px solid #E72B4A",color:"#E72B4A",fontFamily:"poppins",fontSize:"16px",fontWeight:"500"}}),o.createElement(c.A,{label:d?"Updating...":"Update Question",handleClick:async()=>{if(!s.question||!s.ans_1||!s.ans_2)return x("Please fill in the question and at least 2 answers"),q("error"),void E(!0);y(!0);try{var e;const t={doctor_questions_id:Number((null==a?void 0:a.doctor_questions_id)||(null==a?void 0:a.question_id)),doctor_id:Number(null==a?void 0:a.doctor_id),doctor_list_id:Number(null==a?void 0:a.doctor_list_id),question:s.question,ans_1:s.ans_1,ans_2:s.ans_2,ans_3:s.ans_3,ans_4:s.ans_4},o=await u.A.post("/sec/createUpdatedoctorlisting/questionUpdate",t);x((null==o||null===(e=o.data)||void 0===e||null===(e=e.response)||void 0===e?void 0:e.message)||"Question updated successfully"),q("success"),E(!0),i&&i(),setTimeout(()=>{n()},1500)}catch(e){var t;x((null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.error)||"Failed to update question"),q("error"),E(!0)}finally{y(!1)}},disabled:d||A,buttonCss:{backgroundColor:"#E72B4A",color:"white",fontFamily:"poppins",fontSize:"16px",fontWeight:"500","&:hover":{backgroundColor:"#d61e3f"}}}))},o.createElement("div",{style:{padding:"20px",minWidth:"500px"}},A?o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",flexDirection:"column",gap:"16px"}},o.createElement(m.A,{size:40}),o.createElement(r.A,{variant:"body1",fontFamily:"poppins"},"Loading question data...")):o.createElement("div",null,o.createElement("div",{style:{marginBottom:"20px"}},o.createElement(g.A,{label:"Question",CustomValue:s.question||"",onChange:e=>O("question",e.target.value),textcss:{width:"100%",fontFamily:"poppins",fontSize:"16px"},multiline:!0,rows:3,required:!0})),[1,2,3,4].map(e=>o.createElement("div",{key:e,style:{marginBottom:"16px"}},o.createElement(g.A,{label:"Answer ".concat(e),CustomValue:s["ans_".concat(e)]||"",onChange:t=>O("ans_".concat(e),t.target.value),textcss:{width:"100%",fontFamily:"poppins",fontSize:"16px"},required:e<=2}))),d&&o.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"20px"}},o.createElement(m.A,{size:24}),o.createElement(r.A,{style:{marginLeft:"12px",fontFamily:"poppins"}},"Updating question..."))))))};var h=n(40159),x=n(22252),_=n(87734);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=()=>{const{mode:e,listingId:t,doctorId:n,setUnifiedListingId:m}=(0,h.V)();(0,o.useEffect)(()=>{localStorage.setItem("activeComponent","listing"),localStorage.setItem("path","addquestioner"),m(),t?I():B("/doctordashboard/doctorListing/listingdetails",{replace:!0})},[]);const[f,g]=(0,o.useState)("success"),[y,b]=(0,o.useState)(!1),[v,q]=(0,o.useState)(""),[w,O]=(0,o.useState)([]),[C,S]=(0,o.useState)(!0),[j,k]=(0,o.useState)(!1),[P,N]=(0,o.useState)(null),[F,D]=(0,o.useState)({questions:[]}),I=async()=>{S(!0);try{var e;const o=await u.A.get("/sec/getdoctorlisting/questionAll/".concat(t,"/").concat(n));Array.isArray(null===(e=o.data)||void 0===e?void 0:e.response)?O(o.data.response):O([])}catch(e){O([])}finally{S(!1)}},T=async()=>{b(!1);try{var e;let o=await u.A.post("/sec/createUpdatedoctorlisting/questionCreate",JSON.stringify({questions:F.questions.map(e=>A(A({},e),{},{doctor_id:n,doctor_list_id:t}))}));q(null==o||null===(e=o.data)||void 0===e||null===(e=e.response)||void 0===e?void 0:e.message),g("success"),b(!0),setTimeout(()=>{B("/doctordashboard/doctorListing/termandcondition",{replace:!0})},2e3)}catch(e){alert("Fill the details properly",e),q("Not able to add the question"),g("error"),b(!0)}},B=(0,a.Zp)(),Q=e=>{D(t=>{const n=[...t.questions];return n.splice(e,1),{questions:n}})};return o.createElement(o.Fragment,null,o.createElement(p.A,{isOpen:y,message:v,type:f}),o.createElement(E,{isOpen:j,onClose:()=>k(!1),questionData:P,onQuestionUpdated:()=>{I(),k(!1),N(null)}}),o.createElement("div",{className:"main-container",style:{width:"100%",maxWidth:960,margin:"0 auto"}},o.createElement(_.A,null),o.createElement(x.A,{title:"Existing Questions",subtitle:"Review and manage the preset questions shown to patients",actions:o.createElement(c.A,{label:"Add",isTransaprent:!0,isElevated:!0,handleClick:()=>{D(e=>({questions:[...e.questions,{doctor_id:n,doctor_list_id:t,question:"",ans_1:"",ans_2:"",ans_3:"",ans_4:""}]}))},buttonCss:{border:"1px solid #E72B4A",color:"#E72B4A",fontFamily:"poppins",fontSize:"14px",padding:"6px 16px",borderRadius:"24px"}})},C?Array.from({length:3}).map((e,t)=>o.createElement(i.A,{key:t,sx:{marginBottom:2}},o.createElement(s.A,{variant:"rectangular",width:"100%",height:120}))):0===w.length?o.createElement(i.A,{sx:{textAlign:"center",padding:"32px",color:"#666",fontFamily:"poppins"}},"No existing questions found"):w.map((e,t)=>o.createElement(i.A,{key:e.doctor_questions_id||t,className:"question-card",sx:{mb:2}},o.createElement("div",{className:"question-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},o.createElement(r.A,{variant:"subtitle1",sx:{fontFamily:"poppins",fontWeight:500}},"Question ",t+1),o.createElement("div",{className:"question-actions"},o.createElement(c.A,{label:"Edit",isTransaprent:!0,handleClick:()=>(e=>{N(e),k(!0)})(e),buttonCss:{border:"1px solid #E72B4A",color:"#E72B4A",fontFamily:"poppins",fontSize:"14px",padding:"4px 12px",marginRight:"8px"}}),o.createElement(c.A,{label:"Delete",isTransaprent:!0,handleClick:()=>(async e=>{try{await u.A.post("/sec/createUpdatedoctorlisting/questionDelete",{doctor_id:Number(localStorage.getItem("doctor_suid")),doctor_list_id:Number(localStorage.getItem("listing_id")),doctor_questions_id:Number(e)}),q("Question deleted successfully"),g("success"),b(!0),I()}catch(e){q("Failed to delete question"),g("error"),b(!0)}})(e.doctor_questions_id),buttonCss:{border:"1px solid #d32f2f",color:"#d32f2f",fontFamily:"poppins",fontSize:"14px",padding:"4px 12px"}}))),o.createElement(r.A,{variant:"body1",sx:{fontFamily:"poppins",marginBottom:"12px"}},e.question),o.createElement("div",{className:"answers-grid"},[1,2,3,4].map(t=>o.createElement(r.A,{key:t,variant:"body2",sx:{fontFamily:"poppins",color:"#666",marginBottom:"4px"}},t,". ",e["ans_".concat(t)]||"No answer")))))),o.createElement(x.A,{title:"Add / Edit Question",subtitle:"Provide a question and up to 4 answer options"},o.createElement("div",{className:"text-fields"},F.questions.map((e,t)=>o.createElement("div",{key:t,className:"border-box"},o.createElement("div",{className:"text-fields"},o.createElement(d.A,{label:"Question ".concat(t+1),helperText:"",textcss:{width:"591px"},defaultValue:e.question,onInput:e=>{((e,t,n)=>{const{value:o}=e.target;D(e=>{const a=[...e.questions];return a[t]=A(A({},a[t]),{},{[n]:o}),{questions:a}})})(e,t,"question");const n=A(A({},F),{},{question:e.target.value});D(n)}}),[1,2,3,4].map(n=>o.createElement(d.A,{key:n,label:"Answer".concat(n),helperText:"",textcss:{width:"591px"},value:e["ans_".concat(n)],defaultValue:e["ans_".concat(n)],onInput:e=>((e,t,n)=>{const{value:o}=e.target;D(e=>{const a=[...e.questions];return a[t]=A(A({},a[t]),{},{["ans_".concat(n)]:o}),{questions:a}})})(e,t,n)}))),o.createElement("div",{className:"Delete-Icon",style:{display:"flex",alignItems:"center"}},o.createElement(i.A,null,o.createElement(l.A,{onClick:()=>Q(t)})),o.createElement(c.A,{label:"Delete",isTransaprent:"True",buttonCss:{width:"122px",height:"48px",borderTop:"1px",borderRight:"1px",borderBottom:"1px",borderLeft:"1px"},handleClick:()=>Q(t)})))))),o.createElement(i.A,{sx:{marginTop:"1%"}},o.createElement(c.A,{buttonCss:{width:"10.625rem",borderRadius:"6.25rem",margin:"0.5%"},label:"Save As Draft",isTransaprent:!0,handleClick:()=>T()}),o.createElement(c.A,{buttonCss:{width:"10.625rem",borderRadius:"6.25rem",margin:"0.5%"},label:"Next",handleClick:()=>T()}))))}}}]);
//# sourceMappingURL=598.fe511b5e8af44ec24fd9.js.map